# ==============================================================================
# ACP Epithelial Differentiation Analysis - Configuration File
# ==============================================================================

project:
  name: "ACP Epithelial Differentiation Analysis"
  version: "1.0.0"
  author: "Eric Prince"
  date_created: "2025-12-29"

# ==============================================================================
# FILE PATHS
# ==============================================================================

paths:
  # Input data
  spatial_object: "data/raw/spatial-object.rds"
  snrnaseq_processed: "data/external/GSE215932/GSE215932_snRNA_processed.rds"
  acp_scn_annotated: "data/raw/acp_scn_annotated.rds"
  cellxgene_keratinocytes: "data/reference/cellxgene_skin_keratinocytes.rds"
  merged_dataset: "data/processed/merged_acp_gse.rds"

  # Output directories
  tables_dir: "results/tables"
  figures_main_dir: "results/figures/main"
  figures_supp_dir: "results/figures/supplementary"
  objects_dir: "results/objects"

# ==============================================================================
# GENE SIGNATURES
# ==============================================================================

signatures:
  epithelial_subtypes:
    Basal_like:
      - KRT5
      - KRT14
      - KRT15
      - TP63
      - KRT6A
      - KRT6B
      - ITGA6
      - ITGB4
      - COL17A1
      - LAMB3
      - LAMC2

    Intermediate:
      - KRT8
      - KRT18
      - KRT19
      - KRT7
      - EPCAM
      - CDH1
      - CLDN3
      - CLDN4
      - CLDN7
      - TJP1
      - OCLN

    Specialized:
      - KRT20
      - MUC2
      - FABP1
      - SI
      - ALPI
      - VIL1
      - TFF3
      - PIGR
      - CEACAM5
      - CEACAM6

  proliferation:
    - MKI67
    - TOP2A
    - PCNA
    - MCM2
    - MCM3
    - MCM4
    - MCM5
    - MCM6
    - MCM7
    - CDK1
    - CCNA2
    - CCNB1
    - CCNB2
    - AURKA
    - AURKB
    - PLK1
    - BUB1
    - CDC20
    - CDKN3
    - BIRC5

# ==============================================================================
# CLASSIFICATION PARAMETERS
# ==============================================================================

classification:
  method: "module_score"
  min_score_threshold: 0.1

  transit_amplifying:
    proliferation_threshold: 0.15
    require_cycling: true
    override_on_high_proliferation: true
    override_threshold: 0.3

# ==============================================================================
# TRAJECTORY ANALYSIS PARAMETERS
# ==============================================================================

trajectory:
  methods:
    - monocle3
    - slingshot

  monocle3:
    root_subtype: "Basal-like"
    root_selection_method: "all_cells"
    n_root_cells: 50
    use_partition: true
    close_loop: false
    n_pcs: 30
    umap_dims: 30

  slingshot:
    reduction: "umap"
    stretch: 2
    extend: "n"

  consensus:
    min_correlation: 0.5
    auto_flip: true

  per_sample:
    enabled: false  # Disabled for cellxgene dataset
    min_cells_per_sample: 100
    min_cells_per_subtype: 10

  expected_order:
    - "Basal-like"
    - "Transit-Amplifying"
    - "Intermediate"
    - "Specialized"

  statistics:
    n_permutations: 1000
    alpha: 0.05

# ==============================================================================
# VISUALIZATION PARAMETERS
# ==============================================================================

visualization:
  colors:
    epithelial_subtypes:
      Basal-like: "#E41A1C"
      Transit-Amplifying: "#FF7F00"
      Intermediate: "#4DAF4A"
      Specialized: "#377EB8"
      Basal-Intermediate: "#984EA3"
      Intermediate-Specialized: "#A65628"
      Unknown: "#999999"
      Non-epithelial: "#CCCCCC"

    cell_cycle:
      G1: "#F8766D"
      S: "#00BA38"
      G2M: "#619CFF"

  figure_sizes:
    single_panel:
      width: 6
      height: 5
    double_panel:
      width: 12
      height: 5
    multi_panel:
      width: 14
      height: 10

  plot_settings:
    point_size: 1.5
    alpha: 0.7
    dpi: 300
    base_size: 12

# ==============================================================================
# REPRODUCIBILITY SETTINGS
# ==============================================================================

reproducibility:
  seed: 42
  n_cores: 4

# ==============================================================================
# OUTPUT FORMATS
# ==============================================================================

output:
  tables:
    format: "csv"
  figures:
    formats:
      - "pdf"
      - "png"
    png_dpi: 300
  objects:
    compress: true
